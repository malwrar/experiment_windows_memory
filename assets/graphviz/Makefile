# Compiles graphviz dot files into a variety of interesting formats.

# Define compiler and output dir.
CC     = dot
DOT    = $(wildcard *.dot)
OUTDIR = build

# Define output.
SVG = $(DOT:%.dot=$(OUTDIR)/%.svg)
PNG = $(DOT:%.dot=$(OUTDIR)/%.png)
ALL = $(SVG) $(PNG)

# Compile dots into svgs.
$(OUTDIR)/%.svg: %.dot
	@mkdir -p $(OUTDIR)
	$(CC) -Tsvg "$<" -o $@

# Compile dots into pngs.
$(OUTDIR)/%.png: %.dot
	@mkdir -p $(OUTDIR)
	$(CC) -Tpng "$<" -o $@

# Compile everything.
all: $(ALL)

# Clean up all files generated by this Makefile.
.PHONY: clean
clean:
	rm -rf $(OUTDIR)
